/*
 * App Global CSS
 * ----------------------------------------------------------------------------
 * Put style rules here that you want to apply globally. These styles are for
 * the entire app and not just one component. Additionally, this file can be
 * used as an entry point to import other CSS/Sass files to be included in the
 * output CSS.
 * For more information on global stylesheets, visit the documentation:
 * https://ionicframework.com/docs/layout/global-stylesheets
 */

/* Core CSS required for Ionic components to work properly */
@import "@ionic/angular/css/core.css";

/* Basic CSS for apps built with Ionic */
@import "@ionic/angular/css/normalize.css";
@import "@ionic/angular/css/structure.css";
@import "@ionic/angular/css/typography.css";
@import "@ionic/angular/css/display.css";

/* Optional CSS utils that can be commented out */
@import "@ionic/angular/css/padding.css";
@import "@ionic/angular/css/float-elements.css";
@import "@ionic/angular/css/text-alignment.css";
@import "@ionic/angular/css/text-transformation.css";
@import "@ionic/angular/css/flex-utils.css";

/**
 * Ionic Dark Mode
 * -----------------------------------------------------
 * For more info, please see:
 * https://ionicframework.com/docs/theming/dark-mode
 */

/* Importa as paletas de cores para ambos os temas */
@import "@ionic/angular/css/palettes/dark.class.css";

/* Tema personalizado para garantir compatibilidade */
.dark-theme {
    /* Cores de background */
    --ion-background-color: #121212;
    --ion-background-color-rgb: 18, 18, 18;
    --ion-text-color: #ffffff;
    --ion-text-color-rgb: 255, 255, 255;

    /* Cores de item/card */
    --ion-item-background: #1e1e1e;
    --ion-item-background-rgb: 30, 30, 30;

    /* Cores de border/separador */
    --ion-color-step-50: #1e1e1e;
    --ion-color-step-100: #2a2a2a;
    --ion-color-step-150: #363636;
    --ion-color-step-200: #404040;
    --ion-color-step-250: #4a4a4a;
    --ion-color-step-300: #545454;
    --ion-color-step-350: #5e5e5e;
    --ion-color-step-400: #686868;
    --ion-color-step-450: #727272;
    --ion-color-step-500: #7c7c7c;
    --ion-color-step-550: #868686;
    --ion-color-step-600: #909090;
    --ion-color-step-650: #9a9a9a;
    --ion-color-step-700: #a4a4a4;
    --ion-color-step-750: #aeaeae;
    --ion-color-step-800: #b8b8b8;
    --ion-color-step-850: #c2c2c2;
    --ion-color-step-900: #cccccc;
    --ion-color-step-950: #d6d6d6;

    /* Cores específicas do sistema */
    --ion-toolbar-background: var(--ion-color-danger);
    --ion-tab-bar-background: #1f1f1f;
}

.light-theme {
    /* Cores de background para tema claro */
    --ion-background-color: #ffffff;
    --ion-background-color-rgb: 255, 255, 255;
    --ion-text-color: #000000;
    --ion-text-color-rgb: 0, 0, 0;

    /* Cores de item/card */
    --ion-item-background: #ffffff;
    --ion-item-background-rgb: 255, 255, 255;

    /* Garantir que os steps estejam corretos para tema claro */
    --ion-color-step-50: #f9f9f9;
    --ion-color-step-100: #f5f5f5;
    --ion-color-step-150: #eeeeee;
    --ion-color-step-200: #e1e1e1;
    --ion-color-step-250: #d6d6d6;
    --ion-color-step-300: #cccccc;
    --ion-color-step-350: #c2c2c2;
    --ion-color-step-400: #b8b8b8;
    --ion-color-step-450: #aeaeae;
    --ion-color-step-500: #a4a4a4;
    --ion-color-step-550: #9a9a9a;
    --ion-color-step-600: #909090;
    --ion-color-step-650: #868686;
    --ion-color-step-700: #7c7c7c;
    --ion-color-step-750: #727272;
    --ion-color-step-800: #686868;
    --ion-color-step-850: #5e5e5e;
    --ion-color-step-900: #545454;
    --ion-color-step-950: #4a4a4a;
}

// CORREÇÃO PARA EVITAR SOBREPOSIÇÃO DO HEADER
ion-header {
    position: relative !important; // Força o header a ficar no fluxo normal
    z-index: auto !important; // Remove z-index alto que pode causar sobreposição
}

ion-content {
    position: relative !important; // Garante que o conteúdo fique no fluxo normal
    top: auto !important; // Remove qualquer posicionamento absoluto
}

// src/global.scss
.permissoes-modal-css {
    --width: 90%; // Largura do modal em relação à tela
    --max-width: 550px; // Largura máxima para telas maiores
    --height: 75vh; // Altura do modal em relação à altura da tela (ex: 75% da altura da viewport)
    --max-height: 600px; // Altura máxima absoluta
    --border-radius: 12px; // Bordas arredondadas para o modal
    // overflow: hidden;             // É melhor deixar o ion-content interno lidar com o scroll.
    // Adicione se tiver problemas de conteúdo vazando do modal em si.

    // Para garantir que o conteúdo dentro do modal use o espaço corretamente
    .modal-wrapper {
        // O Ionic geralmente usa esta classe para o conteúdo do modal
        display: flex;
        flex-direction: column;
        height: 100%; // Faz o wrapper interno ocupar toda a altura do modal definida acima
    } }

// NOVO (opcional, para destacar o item do topo quando o popover estiver ativo ou a rota for a dele)
.global-top-header .top-menu-buttons .top-menu-button.active-top-menu {
    background-color: rgba(255, 255, 255, 0.15); // Leve destaque
}
.top-menu-popover-class {
    --min-width: 200px;
    --max-width: 280px;
    --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); // Sombra padrão
}

// ================================
// CLASSES GLOBAIS PARA BOTÕES
// ================================

// Botões de confirmação/ação principal - VERDE
.btn-success,
.primary-action-button,
.confirm-button,
.login-button {
    --color: var(--ion-color-success-contrast) !important;
    --background: var(--ion-color-success) !important;
    --background-activated: var(--ion-color-success-shade) !important;
    --background-hover: var(--ion-color-success-tint) !important;
}

// Botões de cancelamento/exclusão - VERMELHO
.btn-danger,
.cancel-button,
.delete-button,
.restart-button {
    --color: var(--ion-color-danger-contrast) !important;
    --background: var(--ion-color-danger) !important;
    --background-activated: var(--ion-color-danger-shade) !important;
    --background-hover: var(--ion-color-danger-tint) !important;
}

// Botões secundários/neutros - CINZA
.btn-secondary,
.secondary-button {
    --color: var(--ion-color-medium-contrast) !important;
    --background: var(--ion-color-medium) !important;
    --background-activated: var(--ion-color-medium-shade) !important;
    --background-hover: var(--ion-color-medium-tint) !important;
}

// Botões de informação - AZUL
.btn-info,
.info-button {
    --color: var(--ion-color-primary-contrast) !important;
    --background: var(--ion-color-primary) !important;
    --background-activated: var(--ion-color-primary-shade) !important;
    --background-hover: var(--ion-color-primary-tint) !important;
}

// Botões de aviso - LARANJA
.btn-warning,
.warning-button {
    --color: var(--ion-color-warning-contrast) !important;
    --background: var(--ion-color-warning) !important;
    --background-activated: var(--ion-color-warning-shade) !important;
    --background-hover: var(--ion-color-warning-tint) !important;
}

// ================================
// APLICAÇÃO FORÇADA DO TEMA EM TODOS OS COMPONENTES
// ================================

// Força aplicação do tema em toda a aplicação
html, body {
    background-color: var(--ion-background-color) !important;
    color: var(--ion-text-color) !important;
}

// Força aplicação do tema em todos os componentes Ionic
ion-app,
ion-content,
ion-page,
ion-modal,
ion-popover,
ion-toast,
ion-action-sheet,
ion-alert,
ion-loading {
    --background: var(--ion-background-color) !important;
    --color: var(--ion-text-color) !important;
    background-color: var(--ion-background-color) !important;
    color: var(--ion-text-color) !important;
}

// Força aplicação em elementos de lista
ion-list,
ion-list-header,
ion-item,
ion-item-divider,
ion-label {
    --background: var(--ion-item-background) !important;
    --color: var(--ion-text-color) !important;
    background-color: var(--ion-item-background) !important;
    color: var(--ion-text-color) !important;
}

// Força aplicação em cards
ion-card {
    --background: var(--ion-item-background) !important;
    --color: var(--ion-text-color) !important;
    background-color: var(--ion-item-background) !important;
    color: var(--ion-text-color) !important;
}

ion-card-header,
ion-card-content,
ion-card-title,
ion-card-subtitle {
    --color: var(--ion-text-color) !important;
    color: var(--ion-text-color) !important;
}

// Força aplicação em headers e toolbars
ion-header,
ion-toolbar,
ion-title {
    --background: var(--ion-item-background) !important;
    --color: var(--ion-text-color) !important;
    background-color: var(--ion-item-background) !important;
    color: var(--ion-text-color) !important;
}

// Força aplicação em inputs e forms
ion-input,
ion-textarea,
ion-select,
ion-searchbar,
ion-range,
ion-datetime {
    --background: var(--ion-item-background) !important;
    --color: var(--ion-text-color) !important;
    --placeholder-color: var(--ion-color-medium) !important;
}

// Força aplicação em textos gerais
h1, h2, h3, h4, h5, h6,
p, span, div, a {
    color: var(--ion-text-color) !important;
}

// Força aplicação específica em popovers com fundo escuro
ion-popover {
    .popover-content {
        --background: var(--ion-color-dark) !important;
        --color: white !important;
        background-color: var(--ion-color-dark) !important;
        color: white !important;
    }

    ion-list,
    ion-item {
        --background: var(--ion-color-dark) !important;
        --color: white !important;
        background-color: var(--ion-color-dark) !important;
        color: white !important;
        
        &:hover {
            --background: rgba(255, 255, 255, 0.1) !important;
            background: rgba(255, 255, 255, 0.1) !important;
        }
    }
    
    ion-label {
        color: white !important;
    }
    
    ion-icon {
        color: rgba(255, 255, 255, 0.7) !important;
    }
}

// Força aplicação específica em modais
ion-modal {
    .modal-wrapper {
        --background: var(--ion-background-color) !important;
        --color: var(--ion-text-color) !important;
        background-color: var(--ion-background-color) !important;
        color: var(--ion-text-color) !important;
    }
}

// Força aplicação em elementos com overlay
.overlay-background {
    background-color: var(--ion-background-color) !important;
    color: var(--ion-text-color) !important;
}

// ================================
// CLASSES DE CONTAINERS/LAYOUT
// ================================

// Container para ações/botões
.action-buttons {
    display: flex;
    gap: 12px;
    padding: 16px;
    justify-content: space-between;

    &.center {
        justify-content: center;
    }

    &.end {
        justify-content: flex-end;
    }
}

.footer-buttons {
    display: flex;
    gap: 12px;
    padding: 12px 16px;
    justify-content: space-between;
    width: 100%;
}

// Estados de loading, empty e error
.loading-container,
.empty-state,
.error-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 32px 16px;
    text-align: center;

    ion-icon {
        margin-bottom: 16px;
    }

    h2, h3 {
        margin-bottom: 8px;
        color: var(--ion-text-color);
    }

    p {
        color: var(--ion-color-medium);
        margin-bottom: 16px;
    }
}

.loading-text {
    margin-top: 12px;
    color: var(--ion-color-medium);
}

/* FORÇA MENU VERMELHO - MÁXIMA PRIORIDADE */
ion-popover.popover-desktop,
ion-popover.popover-tablet,
ion-popover.popover-mobile,
ion-popover {
    --background: #dc2626 !important;
    background: #dc2626 !important;
}

ion-popover .popover-content,
ion-popover .popover-wrapper,
ion-popover ion-content,
ion-popover ion-list,
ion-popover ion-item {
    --background: #dc2626 !important;
    background: #dc2626 !important;
    background-color: #dc2626 !important;
    --color: white !important;
    color: white !important;
}

ion-popover ion-label,
ion-popover ion-icon,
ion-popover .item-native {
    color: white !important;
    --color: white !important;
}

ion-popover ion-item:hover {
    --background: rgba(255, 255, 255, 0.1) !important;
    background: rgba(255, 255, 255, 0.1) !important;
}

/* FORÇA O CABEÇALHO "MENU PRINCIPAL" - MÁXIMA PRIORIDADE */
ion-popover .popover-header,
ion-popover ion-header,
ion-popover ion-toolbar,
ion-popover .toolbar,
ion-popover .header {
    --background: #dc2626 !important;
    background: #dc2626 !important;
    background-color: #dc2626 !important;
    --color: white !important;
    color: white !important;
}

ion-popover ion-title,
ion-popover .popover-title,
ion-popover .menu-title,
ion-popover h1, 
ion-popover h2, 
ion-popover h3, 
ion-popover h4, 
ion-popover h5, 
ion-popover h6 {
    color: white !important;
    --color: white !important;
    background: transparent !important;
}

/* REMOVE FUNDOS BRANCOS DOS CONTAINERS */
ion-popover .popover-viewport,
ion-popover .popover-content,
ion-popover .popover-wrapper,
ion-popover .popover-arrow::before,
ion-popover .popover-arrow::after {
    --background: #dc2626 !important;
    background: #dc2626 !important;
    background-color: #dc2626 !important;
}

/* FORÇA TODOS OS TEXTOS A SEREM BRANCOS */
ion-popover * {
    color: white !important;
    --color: white !important;
}

/* FORÇA CLASSE ESPECÍFICA DO POPOVER DO MENU */
.top-menu-popover {
    --background: #dc2626 !important;
    background: #dc2626 !important;
    
    .popover-content {
        --background: #dc2626 !important;
        background: #dc2626 !important;
        background-color: #dc2626 !important;
    }
    
    .popover-header,
    .popover-title {
        --background: #dc2626 !important;
        background: #dc2626 !important;
        background-color: #dc2626 !important;
        color: white !important;
        --color: white !important;
    }
    
    ion-list,
    ion-item {
        --background: #dc2626 !important;
        background: #dc2626 !important;
        background-color: #dc2626 !important;
        color: white !important;
        --color: white !important;
    }
    
    ion-label,
    ion-icon {
        color: white !important;
        --color: white !important;
    }
    
    ion-item:hover {
        --background: rgba(255, 255, 255, 0.1) !important;
        background: rgba(255, 255, 255, 0.1) !important;
    }
}

/* FORÇA REMOÇÃO COMPLETA DE FUNDOS BRANCOS NOS POPOVERS */
ion-popover.popover-desktop .popover-wrapper,
ion-popover.popover-tablet .popover-wrapper,
ion-popover.popover-mobile .popover-wrapper,
.top-menu-popover .popover-wrapper,
.top-menu-popover .popover-content,
.top-menu-popover .popover-viewport {
    --background: #dc2626 !important;
    background: #dc2626 !important;
    background-color: #dc2626 !important;
}

/* FORÇA TÍTULO "MENU PRINCIPAL" A SER BRANCO */
.top-menu-popover .popover-header *,
.top-menu-popover .popover-title *,
.top-menu-popover h1,
.top-menu-popover h2,
.top-menu-popover h3 {
    color: white !important;
    background: transparent !important;
}

/* FORÇA TODOS OS ELEMENTOS DO POPOVER - SOLUÇÃO FINAL */
.popover-desktop .popover-content,
.popover-tablet .popover-content,
.popover-mobile .popover-content,
ion-popover-controller ion-popover .popover-content {
    --background: #dc2626 !important;
    background: #dc2626 !important;
    background-color: #dc2626 !important;
}

/* REMOVE QUALQUER VESTÍGIO DE BRANCO NO POPOVER */
.popover-md .popover-content,
.popover-ios .popover-content {
    --background: #dc2626 !important;
    background: #dc2626 !important;
    background-color: #dc2626 !important;
    color: white !important;
}

/* FORÇA OVERRIDE TOTAL DOS ELEMENTOS BRANCOS */
ion-popover::part(content),
ion-popover::part(backdrop),
.top-menu-popover::part(content) {
    --background: #dc2626 !important;
    background: #dc2626 !important;
    background-color: #dc2626 !important;
}
