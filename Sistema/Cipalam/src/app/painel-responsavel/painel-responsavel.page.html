<ion-content class="ion-padding responsavel-content">
  <div class="welcome-container">
    <div class="welcome-header">
      <ion-icon name="home-outline" color="primary" class="welcome-icon"></ion-icon>
      <h1>Bem-vindo(a), {{ usuarioLogado?.pessoa?.nmPessoa || usuarioLogado?.nomePessoa || 'Respons√°vel' }}!</h1>
      <p>Esta √© sua √°rea exclusiva para acompanhar a matr√≠cula do seu filho(a).</p>

      <!-- Bot√£o de debug tempor√°rio -->
      <ion-button size="small" fill="clear" color="medium" (click)="debugDados()">
        <ion-icon name="bug-outline" slot="start"></ion-icon>
        Debug
      </ion-button>
    </div>
  </div>

  <!-- Se√ß√£o de Informa√ß√µes da Matr√≠cula -->
  <div class="section-container">
    <ion-card>
      <ion-card-header>
        <ion-card-title color="primary">
          <ion-icon name="school-outline" slot="start"></ion-icon>
          Situa√ß√£o da Matr√≠cula
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <div class="status-info">
          <ion-chip color="success">
            <ion-icon name="checkmark-circle-outline"></ion-icon>
            <ion-label>Matr√≠cula Ativa</ion-label>
          </ion-chip>
          <p>Sua matr√≠cula est√° ativa. Complete o envio dos documentos necess√°rios.</p>
        </div>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Se√ß√£o de Documentos Necess√°rios -->
  <div class="section-container">
    <ion-card>
      <ion-card-header>
        <ion-card-title color="primary">
          <ion-icon name="folder-outline" slot="start"></ion-icon>
          Documentos Necess√°rios
        </ion-card-title>
        <ion-card-subtitle>Envie os documentos para finalizar o processo de matr√≠cula</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <!-- Loading de documentos -->
        <div *ngIf="documentosCarregando" class="loading-container">
          <ion-spinner name="crescent"></ion-spinner>
          <p>Carregando documentos...</p>
        </div>

        <!-- Documentos carregados -->
        <div *ngIf="!documentosCarregando">
          <!-- Documentos do Respons√°vel/Fam√≠lia -->
          <div class="document-category" *ngIf="obterDocumentosPorCategoria('familia').length > 0">
            <h3>
              <ion-icon name="people-outline" color="primary"></ion-icon>
              Documentos da Fam√≠lia
            </h3>
            <ion-list>
              <ion-item *ngFor="let documento of obterDocumentosPorCategoria('familia')">
                <ion-icon name="document-outline" slot="start" [color]="obterCorStatus(documento.status)"></ion-icon>
                <ion-label>
                  <h2>{{ documento.nomeDocumento }}</h2>
                  <p>{{ documento.descricao }}</p>
                  <p *ngIf="documento.nomeArquivoOriginal" class="arquivo-anexado">
                    üìé {{ documento.nomeArquivoOriginal }}
                  </p>
                </ion-label>
                <ion-chip slot="end" [color]="obterCorStatus(documento.status)">
                  <ion-icon name="time-outline" *ngIf="documento.status === 'pendente'"></ion-icon>
                  <ion-icon name="cloud-upload-outline" *ngIf="documento.status === 'anexado'"></ion-icon>
                  <ion-icon name="checkmark-circle-outline" *ngIf="documento.status === 'aprovado'"></ion-icon>
                  <ion-icon name="close-circle-outline" *ngIf="documento.status === 'rejeitado'"></ion-icon>
                  <ion-label>{{ documento.statusDescricao }}</ion-label>
                </ion-chip>
                <!-- Bot√µes de a√ß√£o -->
                <ion-button fill="clear" slot="end" (click)="anexarDocumento(documento)"
                  *ngIf="documento.status === 'pendente' || documento.status === 'rejeitado'">
                  <ion-icon name="attach-outline"></ion-icon>
                </ion-button>
                <ion-button fill="clear" slot="end" (click)="baixarDocumento(documento)"
                  *ngIf="documento.status !== 'pendente'">
                  <ion-icon name="download-outline"></ion-icon>
                </ion-button>
                <ion-button fill="clear" slot="end" (click)="removerDocumento(documento)"
                  *ngIf="documento.status === 'anexado' || documento.status === 'rejeitado'">
                  <ion-icon name="trash-outline" color="danger"></ion-icon>
                </ion-button>
              </ion-item>
            </ion-list>
          </div>

          <!-- Documentos do Aluno -->
          <div class="document-category" *ngIf="obterDocumentosPorCategoria('aluno').length > 0">
            <h3>
              <ion-icon name="person-outline" color="tertiary"></ion-icon>
              Documentos do Aluno
            </h3>
            <ion-list>
              <ion-item *ngFor="let documento of obterDocumentosPorCategoria('aluno')">
                <ion-icon name="document-outline" slot="start" [color]="obterCorStatus(documento.status)"></ion-icon>
                <ion-label>
                  <h2>{{ documento.nomeDocumento }}</h2>
                  <p>{{ documento.descricao }}</p>
                  <p *ngIf="documento.nomeArquivoOriginal" class="arquivo-anexado">
                    üìé {{ documento.nomeArquivoOriginal }}
                  </p>
                </ion-label>
                <ion-chip slot="end" [color]="obterCorStatus(documento.status)">
                  <ion-icon name="time-outline" *ngIf="documento.status === 'pendente'"></ion-icon>
                  <ion-icon name="cloud-upload-outline" *ngIf="documento.status === 'anexado'"></ion-icon>
                  <ion-icon name="checkmark-circle-outline" *ngIf="documento.status === 'aprovado'"></ion-icon>
                  <ion-icon name="close-circle-outline" *ngIf="documento.status === 'rejeitado'"></ion-icon>
                  <ion-label>{{ documento.statusDescricao }}</ion-label>
                </ion-chip>
                <!-- Bot√µes de a√ß√£o -->
                <ion-button fill="clear" slot="end" (click)="anexarDocumento(documento)"
                  *ngIf="documento.status === 'pendente' || documento.status === 'rejeitado'">
                  <ion-icon name="attach-outline"></ion-icon>
                </ion-button>
                <ion-button fill="clear" slot="end" (click)="baixarDocumento(documento)"
                  *ngIf="documento.status !== 'pendente'">
                  <ion-icon name="download-outline"></ion-icon>
                </ion-button>
                <ion-button fill="clear" slot="end" (click)="removerDocumento(documento)"
                  *ngIf="documento.status === 'anexado' || documento.status === 'rejeitado'">
                  <ion-icon name="trash-outline" color="danger"></ion-icon>
                </ion-button>
              </ion-item>
            </ion-list>
          </div>

          <!-- Documentos Espec√≠ficos da Cota -->
          <div class="document-category" *ngIf="obterDocumentosPorCategoria('cota').length > 0">
            <h3>
              <ion-icon name="document-text-outline" color="warning"></ion-icon>
              Documentos Espec√≠ficos da Cota
            </h3>
            <ion-list>
              <ion-item *ngFor="let documento of obterDocumentosPorCategoria('cota')">
                <ion-icon name="document-outline" slot="start" [color]="obterCorStatus(documento.status)"></ion-icon>
                <ion-label>
                  <h2>{{ documento.nomeDocumento }}</h2>
                  <p>{{ documento.descricao }}</p>
                  <p *ngIf="documento.nomeArquivoOriginal" class="arquivo-anexado">
                    üìé {{ documento.nomeArquivoOriginal }}
                  </p>
                </ion-label>
                <ion-chip slot="end" [color]="obterCorStatus(documento.status)">
                  <ion-icon name="time-outline" *ngIf="documento.status === 'pendente'"></ion-icon>
                  <ion-icon name="cloud-upload-outline" *ngIf="documento.status === 'anexado'"></ion-icon>
                  <ion-icon name="checkmark-circle-outline" *ngIf="documento.status === 'aprovado'"></ion-icon>
                  <ion-icon name="close-circle-outline" *ngIf="documento.status === 'rejeitado'"></ion-icon>
                  <ion-label>{{ documento.statusDescricao }}</ion-label>
                </ion-chip>
                <!-- Bot√µes de a√ß√£o -->
                <ion-button fill="clear" slot="end" (click)="anexarDocumento(documento)"
                  *ngIf="documento.status === 'pendente' || documento.status === 'rejeitado'">
                  <ion-icon name="attach-outline"></ion-icon>
                </ion-button>
                <ion-button fill="clear" slot="end" (click)="baixarDocumento(documento)"
                  *ngIf="documento.status !== 'pendente'">
                  <ion-icon name="download-outline"></ion-icon>
                </ion-button>
                <ion-button fill="clear" slot="end" (click)="removerDocumento(documento)"
                  *ngIf="documento.status === 'anexado' || documento.status === 'rejeitado'">
                  <ion-icon name="trash-outline" color="danger"></ion-icon>
                </ion-button>
              </ion-item>
            </ion-list>
          </div>

          <!-- Mensagem quando n√£o h√° documentos -->
          <div *ngIf="documentosPendentes.length === 0" class="no-documents">
            <ion-icon name="document-text-outline" color="medium" size="large"></ion-icon>
            <h3>Nenhum documento pendente encontrado</h3>
            <p>Todos os documentos necess√°rios j√° foram enviados ou n√£o h√° documentos configurados para sua matr√≠cula.
            </p>
          </div>
        </div>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Se√ß√£o de Informa√ß√µes de Contato -->
  <div class="section-container">
    <ion-card>
      <ion-card-header>
        <ion-card-title color="primary">
          <ion-icon name="call-outline" slot="start"></ion-icon>
          Precisa de Ajuda?
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <p>Entre em contato conosco caso tenha d√∫vidas sobre o processo de matr√≠cula:</p>

        <ion-item lines="none">
          <ion-icon name="call" slot="start" color="primary"></ion-icon>
          <ion-label>
            <h3>Telefone</h3>
            <p>(31) 3822-9999</p>
          </ion-label>
        </ion-item>

        <ion-item lines="none">
          <ion-icon name="mail" slot="start" color="primary"></ion-icon>
          <ion-label>
            <h3>E-mail</h3>
            <p>contato&#64;cipalam.org.br</p>
          </ion-label>
        </ion-item>

        <ion-item lines="none">
          <ion-icon name="time" slot="start" color="primary"></ion-icon>
          <ion-label>
            <h3>Hor√°rio de Atendimento</h3>
            <p>Segunda a Sexta: 8h √†s 17h</p>
          </ion-label>
        </ion-item>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>