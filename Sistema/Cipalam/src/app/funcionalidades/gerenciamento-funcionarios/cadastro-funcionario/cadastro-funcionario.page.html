<ion-content [fullscreen]="true" class="cadastro-content">
  <div class="form-container">
    <!-- Header da página -->
    <div class="page-header">
      <div class="header-content">
        <div class="header-info">
          <h1>{{ isEditMode ? 'Editar Colaborador' : 'Novo Colaborador' }}</h1>
          <p>{{ isEditMode ? 'Altere as informações do funcionário' : 'Preencha as informações principais do
            funcionário' }}</p>
        </div>
        <div class="header-illustration">
          <ion-icon name="people-outline"></ion-icon>
        </div>
      </div>
    </div>

    <!-- Formulário -->
    <form [formGroup]="cadastroForm" class="form-wrapper">

      <!-- Seção: Dados Pessoais -->
      <div class="form-section">
        <div class="section-header">
          <div class="section-icon">
            <ion-icon name="person-outline"></ion-icon>
          </div>
          <div class="section-title">
            <h2>Dados Pessoais</h2>
            <p>Informações básicas do funcionário</p>
          </div>
        </div>

        <div class="form-group">
          <ion-item>
            <ion-label position="floating">Nome Completo <ion-text color="danger">*</ion-text></ion-label>
            <ion-input type="text" formControlName="nomeCompleto" (ionFocus)="onInputFocus($event)" (ionBlur)="onInputBlur($event)" required></ion-input>
          </ion-item>

          <ion-item>
            <ion-label position="floating">E-mail <ion-text color="danger">*</ion-text></ion-label>
            <ion-input type="email" formControlName="email" (ionFocus)="onInputFocus($event)" (ionBlur)="onInputBlur($event)" required></ion-input>
          </ion-item>

          <ion-item>
            <ion-label position="floating">CPF</ion-label>
            <ion-input type="text" formControlName="cpf" (ionInput)="onCpfInput($event)" (ionFocus)="onCpfFocus($event)" (ionBlur)="onCpfBlur($event)"></ion-input>
          </ion-item>

          <ion-item>
            <ion-label position="floating">Telefone <ion-text color="danger">*</ion-text></ion-label>
            <ion-input type="tel" formControlName="telefone" (ionInput)="onPhoneInput($event)" (ionFocus)="onPhoneFocus($event)" (ionBlur)="onPhoneBlur($event)" required></ion-input>
          </ion-item>
        </div>
      </div>

      <!-- Seção: Datas Importantes -->
      <div class="form-section">
        <div class="section-header">
          <div class="section-icon">
            <ion-icon name="calendar-outline"></ion-icon>
          </div>
          <div class="section-title">
            <h2>Datas Importantes</h2>
            <p>Datas de nascimento e entrada no Instituto</p>
          </div>
        </div>

        <div class="form-group">
          <ion-item>
            <ion-label position="floating">Data de Nascimento <ion-text color="danger">*</ion-text></ion-label>
            <ion-input type="date" formControlName="dataNascimento" required></ion-input>
            <ion-button fill="clear" slot="end" (click)="openDatePicker('dataNascimento')">
              <ion-icon name="calendar-outline"></ion-icon>
            </ion-button>
          </ion-item>
          <ion-item>
            <ion-label position="floating">Data de Entrada <ion-text color="danger">*</ion-text></ion-label>
            <ion-input type="date" formControlName="dataEntradaInstituto" required></ion-input>
            <ion-button fill="clear" slot="end" (click)="openDatePicker('dataEntradaInstituto')">
              <ion-icon name="calendar-outline"></ion-icon>
            </ion-button>
          </ion-item>
        </div>
      </div>

      <!-- Seção: Dados do Sistema -->
      <div class="form-section">
        <div class="section-header">
          <div class="section-icon">
            <ion-icon name="key-outline"></ion-icon>
          </div>
          <div class="section-title">
            <h2>Dados do Sistema</h2>
            <p>Credenciais de acesso ao sistema</p>
          </div>
        </div>

        <div class="form-group">
          <ion-item>
            <ion-label position="floating">Usuário do Sistema <ion-text color="danger">*</ion-text></ion-label>
            <ion-input type="text" formControlName="usuarioSistema" required (ionFocus)="onInputFocus($event)" (ionBlur)="onInputBlur($event)"></ion-input>
          </ion-item>

          <ion-item>
            <ion-label position="floating">Senha do Sistema <ion-text color="danger">*</ion-text></ion-label>
            <ion-input type="password" formControlName="senhaSistema" required (ionFocus)="onInputFocus($event)" (ionBlur)="onInputBlur($event)"></ion-input>
          </ion-item>
        </div>
      </div>

      <!-- Botões de Ação -->
      <div class="form-actions">
        <ion-button fill="clear" color="medium" size="large" routerLink="/sistema/funcionarios">
          <ion-icon name="close-outline" slot="start"></ion-icon>
          Cancelar
        </ion-button>

        <ion-button type="button" color="primary" size="large" [disabled]="cadastroForm.invalid"
          (click)="prosseguirParaPermissoes()">
          <ion-icon name="checkmark-outline" slot="start"></ion-icon>
          {{ isEditMode ? 'Atualizar Permissões' : 'Prosseguir' }}
        </ion-button>
      </div>
    </form>
  </div>
</ion-content>