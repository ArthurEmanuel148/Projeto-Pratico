<ion-header class="page-specific-header" [translucent]="true">
  <ion-toolbar color="danger">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/paineis/gerenciamento-funcionarios/lista"></ion-back-button>
    </ion-buttons>
    <ion-title>Novo Funcionário</ion-title>
    <!-- O botão de salvar/próximo foi para o final da página -->
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding cadastro-funcionario-content">
  <!-- Título Grande Opcional (Condense Header) -->
  <ion-header collapse="condense" class="condense-header">
    <ion-toolbar>
      <ion-title size="large">Cadastrar Funcionário</ion-title>
    </ion-toolbar>
  </ion-header>

  <!-- Introdução ou Subtítulo da Seção -->
  <div class="form-introduction ion-margin-bottom">
    <h2>Informações Básicas</h2>
    <p>Preencha os dados principais do novo colaborador.</p>
  </div>

  <form [formGroup]="cadastroForm">
    <ion-list lines="none" class="form-list">

      <ion-item-group>
        <ion-item-divider class="sticky-divider">
          <ion-label>Identificação</ion-label>
        </ion-item-divider>

        <ion-item class="input-item">
          <ion-icon name="person-circle-outline" slot="start" color="medium"></ion-icon>
          <ion-label position="floating">Nome Completo <ion-text color="danger">*</ion-text></ion-label>
          <ion-input type="text" formControlName="nomeCompleto" required autocapitalize="words"></ion-input>
        </ion-item>
        <div *ngIf="cadastroForm.get('nomeCompleto')?.invalid && cadastroForm.get('nomeCompleto')?.touched"
          class="error-message">
          <small *ngIf="cadastroForm.get('nomeCompleto')?.errors?.['required']">Nome completo é obrigatório.</small>
        </div>

        <ion-item class="input-item">
          <ion-icon name="mail-outline" slot="start" color="medium"></ion-icon>
          <ion-label position="floating">E-mail <ion-text color="danger">*</ion-text></ion-label>
          <ion-input type="email" formControlName="email" required email></ion-input>
        </ion-item>
        <div *ngIf="cadastroForm.get('email')?.invalid && cadastroForm.get('email')?.touched" class="error-message">
          <small *ngIf="cadastroForm.get('email')?.errors?.['required']">E-mail é obrigatório.</small>
          <small *ngIf="cadastroForm.get('email')?.errors?.['email']">Formato de e-mail inválido.</small>
        </div>
      </ion-item-group>

      <ion-item-group>
        <ion-item-divider class="sticky-divider">
          <ion-label>Datas Importantes</ion-label>
        </ion-item-divider>
      
        <ion-item class="input-item">
          <ion-icon name="calendar-outline" slot="start" color="medium"></ion-icon>
          <!-- MUDANÇA AQUI: position="stacked" -->
          <ion-label position="stacked">Data de Nascimento <ion-text color="danger">*</ion-text></ion-label>
          <ion-input type="date" formControlName="dataNascimento" required placeholder="DD/MM/AAAA"></ion-input>
        </ion-item>
        <div *ngIf="cadastroForm.get('dataNascimento')?.invalid && cadastroForm.get('dataNascimento')?.touched"
          class="error-message">
          <small *ngIf="cadastroForm.get('dataNascimento')?.errors?.['required']">Data de nascimento é obrigatória.</small>
        </div>
      
        <ion-item class="input-item">
          <ion-icon name="business-outline" slot="start" color="medium"></ion-icon>
          <!-- MUDANÇA AQUI: position="stacked" -->
          <ion-label position="stacked">Data de Entrada no Instituto <ion-text color="danger">*</ion-text></ion-label>
          <ion-input type="date" formControlName="dataEntradaInstituto" required placeholder="DD/MM/AAAA"></ion-input>
        </ion-item>
        <div *ngIf="cadastroForm.get('dataEntradaInstituto')?.invalid && cadastroForm.get('dataEntradaInstituto')?.touched"
          class="error-message">
          <small *ngIf="cadastroForm.get('dataEntradaInstituto')?.errors?.['required']">Data de entrada é obrigatória.</small>
        </div>
        </ion-item-group>

      <ion-item-group>
        <ion-item-divider class="sticky-divider">
          <ion-label>Contato</ion-label>
        </ion-item-divider>
        <ion-item class="input-item">
          <ion-icon name="call-outline" slot="start" color="medium"></ion-icon>
          <ion-label position="stacked">Telefone <ion-text color="danger">*</ion-text></ion-label>
          <ion-input type="tel" formControlName="telefone" required placeholder="(XX) XXXXX-XXXX"></ion-input>
        </ion-item>
        <div *ngIf="cadastroForm.get('telefone')?.invalid && cadastroForm.get('telefone')?.touched"
          class="error-message">
          <small *ngIf="cadastroForm.get('telefone')?.errors?.['required']">Telefone é obrigatório.</small>
        </div>
      </ion-item-group>


      <ion-item-group>
        <ion-item-divider class="sticky-divider">
          <ion-label>Acesso ao Sistema</ion-label>
        </ion-item-divider>

        <ion-item class="input-item">
          <ion-icon name="person-outline" slot="start" color="medium"></ion-icon>
          <ion-label position="floating">Usuário <ion-text color="danger">*</ion-text></ion-label>
          <ion-input type="text" formControlName="usuarioSistema" required></ion-input>
        </ion-item>
        <div *ngIf="cadastroForm.get('usuarioSistema')?.invalid && cadastroForm.get('usuarioSistema')?.touched"
          class="error-message">
          <small *ngIf="cadastroForm.get('usuarioSistema')?.errors?.['required']">Usuário é obrigatório.</small>
        </div>

        <ion-item class="input-item">
          <ion-icon name="lock-closed-outline" slot="start" color="medium"></ion-icon>
          <ion-label position="floating">Senha <ion-text color="danger">*</ion-text></ion-label>
          <ion-input type="password" formControlName="senhaSistema" required></ion-input>
        </ion-item>
        <div *ngIf="cadastroForm.get('senhaSistema')?.invalid && cadastroForm.get('senhaSistema')?.touched"
          class="error-message">
          <small *ngIf="cadastroForm.get('senhaSistema')?.errors?.['required']">Senha é obrigatória.</small>
        </div>
      </ion-item-group>

    </ion-list>
  </form>

  <!-- Botão "Permissões" movido para o final do conteúdo, antes de um possível footer da página -->
  <ion-button expand="block" color="danger" (click)="prosseguirParaPermissoes()" [disabled]="!cadastroForm.valid"
    class="ion-margin-top ion-margin-horizontal">
    Próximo: Permissões
    <ion-icon slot="end" name="arrow-forward-outline"></ion-icon>
  </ion-button>

</ion-content>

<!-- Footer opcional da página, se você quiser que o botão fique fixo no final -->
<!--
<ion-footer class="ion-no-border safe-area-bottom">
  <ion-toolbar>
    <ion-button expand="block" color="danger" (click)="prosseguirParaPermissoes()" [disabled]="!cadastroForm.valid">
      Próximo: Permissões
      <ion-icon slot="end" name="arrow-forward-outline"></ion-icon>
    </ion-button>
  </ion-toolbar>
</ion-footer>
-->